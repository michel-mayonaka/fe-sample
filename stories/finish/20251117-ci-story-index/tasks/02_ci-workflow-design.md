# 02_CIワークフロー案のドラフト

ステータス: [完了]
担当: @tkg-engineer
開始: 2025-11-17 02:02:11 +0900

## 目的
- Story 索引生成とメタ検証を CI に組み込むためのワークフロー案を設計し、実装方針のたたき台を作成する。

## 完了条件（DoD）
- [x] どのタイミング（例: PR 作成時 / main push 時）で `make story-index` / `make validate-meta` を実行するかが決まっている。
- [x] エラー発生時に CI を fail とする条件や、warning のみに留める条件が整理されている。
- [x] 索引ファイルの更新をどのように扱うか（自動コミットするか/手動で取り込むか）が案としてまとまっている。

## 作業手順（概略）
- 既存の CI ワークフロー（docs/workflows/ci.md 等）を確認し、どこに Story 検証ステップを追加するか検討する。
- `01_ストーリー索引/メタ検証ツールの棚卸し` の結果を踏まえて、必要なジョブ/ステップを洗い出す。
- YAML 断片や擬似コードレベルでのワークフロー案をまとめる。

## 進捗ログ
- 2025-11-17 02:02:11 +0900: タスク作成。
- 2025-11-19 01:52:18 +0900: `.github/workflows/ci.yml` の `build-and-lint` ジョブに Story 索引生成（`make story-index`）とメタ検証（`./scripts/validate_meta.sh`）ステップを追加し、非strict CI では警告のみとする運用案を整理。

## 依存／ブロッカー
- `01_ストーリー索引/メタ検証ツールの棚卸し` の結果。

## 成果物リンク
- CI ワークフロー案（docs/workflows/ci.md など）
